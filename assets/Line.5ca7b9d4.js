import{p as t,m as e,r as a,o as s,c as l,a as i,t as o,F as r,n,q as u}from"./vendor.33d7487a.js";const d=u();t("data-v-ddfe15aa");const m={id:"Home"},h=i("h2",null,"Line Chart",-1),p=i("h3",null,"請選擇觀測站",-1);e();const c=d(((t,e,u,c,b,g)=>{const S=a("el-header"),f=a("el-option"),y=a("el-option-group"),D=a("el-select"),N=a("el-col"),C=a("el-row"),T=a("line_chart"),v=a("el-main");return s(),l("div",m,[i(S),i(v,null,{default:d((()=>[i("h1",null,"台灣紫外線指數 "+o(g.getSiteName),1),h,i(C,{type:"flex",justify:"center"},{default:d((()=>[i(N,{sm:24},{default:d((()=>[p,i(D,{modelValue:b.SiteName,"onUpdate:modelValue":e[1]||(e[1]=t=>b.SiteName=t),placeholder:"請選擇觀測站"},{default:d((()=>[(s(!0),l(r,null,n(b.options,(t=>(s(),l(y,{key:t.label,label:t.label},{default:d((()=>[(s(!0),l(r,null,n(t.options,(t=>(s(),l(f,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),i(C,{type:"flex",justify:"center"},{default:d((()=>[i(N,{lg:10,md:14,sm:18,xs:24},{default:d((()=>[i(T,{orgData:g.lineData},null,8,["orgData"])])),_:1})])),_:1})])),_:1})])}));const b={data:()=>({datas:[],SiteName:"",options:[],dialogVisible:!1}),computed:{getSiteName(){return this.SiteName=this.$store.getters.getSiteName,this.$store.getters.getSiteName},getOptions(){let t=[],e={},a=this.sortDatabyTime[0].PublishTime,s="";return console.log(this.sortData),this.sortData.map((l=>{l.PublishTime===a&&(l.County===s?e.options.push({value:l.SiteName}):(t.push(e),e={label:l.County,options:[{value:l.SiteName}]}),s=l.County)})),t.shift(),t},sortData(){return this.datas.sort((function(t,e){return t.County<e.County?1:-1}))},sortDatabyTime(){return this.datas.sort((function(t,e){return t.PublishTime<e.PublishTime?1:-1}))},selectData(){return this.sortData.filter((t=>t.SiteName===this.SiteName))},barData(){let t={labels:[],datasets:[{label:"紫外線指數",data:[],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED","#97B0C4","#A5C8ED"]}]};return this.selectData.map((e=>{t.labels.push(this.dateToString(e.PublishTime)),t.datasets[0].data.push(e.UVI)})),t},lineData(){let t={labels:[],datasets:[{fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1,label:"紫外線指數",data:[]}]};return this.selectData.map((e=>{t.labels.push(this.dateToString(e.PublishTime)),t.datasets[0].data.push(e.UVI)})),t},tableData(){let t=[];return this.selectData.map((e=>{let a={County:e.County,PublishAgency:e.PublishAgency,PublishTime:this.dateToString(e.PublishTime),SiteName:e.SiteName,UVI:e.UVI};t.push(a)})),t}},methods:{dateToString(t){let e=[];return e=t.split("-"),e=e[2].split(" "),e=e[0]+"號 "+e[1],e},commitSiteName(){this.$store.commit("selectSite",this.SiteName)}},mounted(){try{this.axios.get("https://data.epa.gov.tw/api/v1/uv_s_01?limit=1000&api_key=9be7b239-557b-4c10-9775-78cadfc555e9&sort=ImportDate%20desc&format=json").then((t=>{this.datas=t.data.records,this.options=this.getOptions}))}catch(t){console.log(t)}},watch:{SiteName:"commitSiteName"}};b.render=c,b.__scopeId="data-v-ddfe15aa";export{b as default};
